<div id="uiBackground">
  <div class="previewBackground">
    <div id="previewBox">
      <h1 class="projectTitle" id="mockTitle">Project Title</h1>
      <p class="teamName" id="mockTeamName">Team Name<p>
    </div>
  </div>
  <div id="colors">
    <form id="colorPicker" onchange="changeBGColor()">
      <label class="container">
        <input type="radio" name="color" value="#71CA86" checked="checked">
        <span class="radioButton" id="green"></span>
      </label>

      <label class="container">
        <input type="radio" id="blue" name="color" value="#82AEFF">
        <span class="radioButton" id="blue"></span>
      </label>

      <label class="container">
        <input type="radio"  name="color" value="#EF843B">
        <span class="radioButton" id="orange"></span>
      </label>

      <label class="container">
        <input type="radio"  name="color" value="#F2B0D3">
        <span class="radioButton" id="pink"></span>
      </label>

      <label class="container">
        <input type="radio"  name="color" value="#9B77C1">
        <span class="radioButton" id="purple"></span>
      </label>

      <label class="container">
        <input type="radio"  name="color" value="#FF5A5A">
        <span class="radioButton" id="red"></span>
      </label>

      <label class="container">
        <input type="radio"  name="color" value="#FFEF5E">
        <span class="radioButton" id="yellow"></span>
      </label>
    
    </form>
  </div>
  <div id="inputBox">
    <div>
      <input type="text" id="projectName" placeholder="Project Title" oninput="onTitleChange()">
    </div>
    <div>
      <input type="text" id="teamName" placeholder="Team Name" oninput="onTeamNameChange()">
    </div>

    <div>
      <input type="text" id="slackChannel" placeholder="#slack-channel-to-learn-more">
    </div>
    <div>
      <input type="text" id="productPOC" placeholder="PM Point of Contact">
    </div>

    <div>
      <input type="text" id="designPOC" placeholder="Design Point of Contact">
    </div>

    <div>
      <input type="text" id="engPOC" placeholder="Engineering Point of Contact">
    </div>

    <div>
      <textarea rows="5" id="projectDescription" placeholder="Short Project Description"></textarea>
    </div>

    <!-- create form to hold checkboxes for specific pages -->
  <form id="pagesToCreate">
    <p id="pagestToCreateTitle">What pages do you want to include?</p>
    <!-- create INDIVIDUAL checkboxes -->
    <input type="checkbox" id="engHandoff" name="engHandoff" value="engHandoff">
    <label for="engHandoff"> ‚öíÔ∏è Eng Handoff</label>

    <input type="checkbox" id="userTesting" name="userTesting" value="userTesting">
    <label for="userTesting"> üî¨ User Testing</label>
    
    <input type="checkbox" id="explore" name="explore" value="explore">
    <label for="explore"> üîÆ Explore </label>

    <input type="checkbox" id="think" name="think" value="think">
    <label for="think"> ü§î Think </label>

    <input type="checkbox" id="archive" name="archive" value="archive">
    <label for="archive"> üì¶ Archive </label>

    <input type="checkbox" id="localComponents" name="localComponents" value="localComponents">
    <label for="localComponents"> Local Components </label>
  
  </form>

    <button id="createProject">Create Project</button>
  </div>
  
</div>

<style>

  #mockTitle {
    color: #002F0B
  }

  #mockTeamName {
    color: #002F0B
  }

  #colors {
    margin-left: 50px;
    margin-top: -14px;
  }

  #green {
    background-color: #71CA86;
  }

  #blue {
    background-color: #82AEFF;
  }

  #orange {
    background-color: #EF843B;
  }

  #pink {
    background-color: #F2B0D3;
  }

  #purple {
    background-color: #9B77C1;
  }

  #red {
    background-color: #FF5A5A;
  }

  #yellow {
    background-color: #FFEF5E;
  }

  
  
  .container {
    margin: 16px;

  }


  .container input {
    opacity: 0;
    cursor: pointer;
    height: 0;
    width: 0;

  }

  .radioButton {
    position: absolute;
    height: 32px;
    width: 32px;
    border-radius: 8px;
    border: 4px solid white;
    box-sizing: border-box;
    
  }


  .container:hover input ~ .radioButton {
    border: 0px;
    border-radius: 4px;
    box-shadow: 0px 6px 10px rgba(0, 0, 0, 0.1);
  }
  .container input:checked ~ .radioButton {
      border: 0px;
      border-radius: 4px;
      box-shadow: 0px 6px 10px rgba(0, 0, 0, 0.1);
  }

  body {
    margin: 0;
  }
  #uiBackground {
    position: relative;
    width: 100%;
    height: 100%;
  }
  .previewBackground {
    background-color: #FBFBFB;
    padding-top: 30px;
    padding-bottom: 30px;
  }

  #previewBox {
    width: 316px;
    height: 177px;
    background-color:#71CA86;
    padding: 30px;
    margin: 0 auto;
  }

  .projectTitle {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    color: white;
  }

  .teamName {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    color: white;
  }

  input[type=text] {
    background: #FFFFFF;
    border: 2px solid #FAF6F4;
    box-sizing: border-box;
    border-radius: 8px;
    padding: 8px;
    margin-bottom: 12px;
    width: 100%;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  }
  
  input:focus[type=text] {
    outline: none !important;
    border: 2px solid #0C6FF9;
  }

  textarea {
    background: #FFFFFF;
    border: 2px solid #FAF6F4;
    box-sizing: border-box;
    border-radius: 8px;
    padding: 8px;
    margin-bottom: 48px;
    width: 100%;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    resize: none;
  }

  textarea:focus {
    outline: none !important;
    border: 2px solid #0C6FF9;
  }

  #inputBox {
    padding: 40px;
    
  }

  button {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 12px 32px;
    margin: 0 auto;
    border: none;

    /* Button Fill */

    background: #0C6FF9;
    /* HS Shadow */

    box-shadow: 0px 2px 0px rgba(26, 25, 25, 0.2);
    border-radius: 72px;
    color: white;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    font-weight: 700;
  }

  #pagesToCreate {
    display: block
  }

</style>


<script>

  var onTitleChange = () => {
    var currentTitleText = document.getElementById("projectName").value;
    var mockTitleText = document.getElementById("mockTitle");
    mockTitleText.innerHTML = currentTitleText;
  }

  var onTeamNameChange = () => {
    var currentTeamNameText = document.getElementById("teamName").value;
    var mockTeamNameText = document.getElementById("mockTeamName");
    mockTeamNameText.innerHTML = currentTeamNameText;
  }

  //set default
  let currentColor = "#71CA86"
  //set default text color
  let currentColorText = "#002F0B"

  var changeBGColor = () => {
    var colorForm = document.getElementById("colorPicker")
    //find checked radio button
    for (var i = 0, length = colorForm.length; i < length; i++) {
      if (colorForm[i].checked) {
        // do whatever you want with the checked radio
        currentColor = colorForm[i].value;
        //change project title and team name text color
        if (currentColor === "#71CA86") {
          currentColorText = "#002F0B"
          console.log("change project title color to Dark Green")
        } else if (currentColor === "#82AEFF") {
          currentColorText = "#0A2B66"
          console.log("change project title color to Dark Blue")
        } else if (currentColor === "#EF843B") {
          currentColorText = "#4E1F00"
          console.log("change project title color to Dark Orange")
        } else if (currentColor === "#F2B0D3") {
          currentColorText = "#4B0028"
          console.log("change project title color to Dark Pink")
        } else if (currentColor === "#9B77C1") {
          currentColorText = "#190033"
          console.log("change project title color to Dark Purple")
        } else if (currentColor === "#FF5A5A") {
          currentColorText = "#410000"
          console.log("change project title color to Dark Red")
        } else if (currentColor === "#FFEF5E") {
          currentColorText = "#420400"
          console.log("change project title color to Dark Yellow")
        }
        //set bg color of preview box
        document.getElementById("previewBox").style.backgroundColor = currentColor;
        //set text of preview box to dark color
        document.getElementById("mockTitle").style.color = currentColorText;
        document.getElementById("mockTeamName").style.color = currentColorText;
        // only one radio can be logically checked, don't check the rest
        break;
      }
}
  }

  document.getElementById('createProject').onclick = () => {

    
    
    //assign project name value from input
    projectName = document.getElementById("projectName").value
    if (projectName === "") {
      projectName = "Project Title"
    }

    //assign team name value from input
    teamName = document.getElementById("teamName").value
    if (teamName === "") {
      teamName = "Team Name"
    }
    
    //assign project description value from input
    projectDescription = document.getElementById("projectDescription").value
    if (projectDescription === "") {
      projectDescription = "Project Description"
    }
    
    productPOC = document.getElementById("productPOC").value
    if (productPOC === "") {
      productPOC = "Product POC"
    }

    designPOC = document.getElementById("designPOC").value
    if (designPOC === "") {
      designPOC = "Design POC"
    }

    engPOC = document.getElementById("engPOC").value
    if (engPOC === "") {
      engPOC = "Engineering POC"
    }

    slackChannel = document.getElementById("slackChannel").value
    if (slackChannel === "") {
      slackChannel = "#slackChannel"
    }

    hexColor = currentColor

    function hexToRGB(h) {
      let r = 0, g = 0, b = 0;

      // 3 digits
      if (h.length == 4) {
        r = "0x" + h[1] + h[1];
        g = "0x" + h[2] + h[2];
        b = "0x" + h[3] + h[3];

      // 6 digits
      } else if (h.length == 7) {
        r = "0x" + h[1] + h[2];
        g = "0x" + h[3] + h[4];
        b = "0x" + h[5] + h[6];
      }
      

      rgbArray = [ (+r/255), (+g/255), (+b/255)]
      return rgbArray
    }

    //set background color value in RGB
    coverBackgroundColorRGB = hexToRGB(currentColor)

    //set title and team name text color in RGB
    titleTeamNameColorRGB = hexToRGB(currentColorText)

     //Create an Array.
    var selectedPages = []

    function GetSelected() {
       
         //Reference the Table.
        var pagesToCreate = document.getElementById("pagesToCreate");
 
        //Reference all the CheckBoxes in Table.
        var chks = pagesToCreate.getElementsByTagName("INPUT");

        // Loop and push the checked CheckBox value in Array.
        for (var i = 0; i < chks.length; i++) {
            if (chks[i].checked) {
                selectedPages.push(chks[i].value);
            }
        }
        
        
    };

    GetSelected();
    
    console.log(selectedPages)
    
    

    parent.postMessage({ pluginMessage: { 
      type: 'createProject', 
      projectName: projectName, 
      projectDescription: projectDescription,
      productPOC: productPOC,
      designPOC: designPOC,
      engPOC: engPOC,
      teamName: teamName, 
      slackChannel: slackChannel, 
      color: coverBackgroundColorRGB,
      textColor: titleTeamNameColorRGB,
      pagesToCreate: selectedPages
    }}, '*')

  }

  

</script>


