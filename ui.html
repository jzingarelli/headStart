<div id="uiBackground">
  <div class="previewBackground">
    <div class="previewBox">
      <h1 class="projectTitle">Project Title</h1>
      <p class="teamName">Team Name<p>
    </div>
  </div>
  <div id="inputBox">
    <div>
      <input type="text" id="projectName" placeholder="Project Title">
    </div>
    <div>
      <input type="text" id="teamName" placeholder="Team Name">
    </div>
    <div>
      <input type="color" id="coverColor" placeholder="Cover Color" value="#e66465">
    </div>
    <div>
      <input type="text" id="slackChannel" placeholder="#some-channel">
    </div>

    

    <div>
      <input type="text" id="productPOC" placeholder="PM Point of Contact">
    </div>

    <div>
      <input type="text" id="designPOC" placeholder="Design Point of Contact">
    </div>

    <div>
      <input type="text" id="engPOC" placeholder="Engineering Point of Contact">
    </div>

    <div>
      <textarea rows="5" id="projectDescription" placeholder="Short Project Description"></textarea>
    </div>

    <button id="createTemplate">Create Template</button>
  </div>
</div>

<style>
  body {
    margin: 0;
  }
  #uiBackground {
    position: relative;
    width: 100%;
    height: 100%;
  }
  .previewBackground {
    background-color: #FBFBFB;
    padding-top: 30px;
    padding-bottom: 30px;
  }

  .previewBox {
    width: 316px;
    height: 177px;
    background-color:#49CE7F;
    padding: 30px;
    margin: 0 auto;
  }

  .projectTitle {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    color: white;
    line-height: 0.5em;
  }

  .teamName {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    color: white;
  }

  input {
    background: #FFFFFF;
    border: 2px solid #FAF6F4;
    box-sizing: border-box;
    border-radius: 8px;
    padding: 8px;
    margin-bottom: 12px;
    width: 100%;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  }
  
  input:focus {
    outline: none !important;
    border: 2px solid #0C6FF9;
  }

  textarea {
    background: #FFFFFF;
    border: 2px solid #FAF6F4;
    box-sizing: border-box;
    border-radius: 8px;
    padding: 8px;
    margin-bottom: 48px;
    width: 100%;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    resize: none;
  }

  #inputBox {
    padding: 40px;
    
  }

  button {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 12px 32px;
    margin: 0 auto;


    /* Button Fill */

    background: #0C6FF9;
    /* HS Shadow */

    box-shadow: 0px 2px 0px rgba(26, 25, 25, 0.2);
    border-radius: 72px;
    color: white;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    font-weight: 800;
  }

</style>


<script>


document.getElementById('createTemplate').onclick = () => {
  projectName = document.getElementById("projectName").value
  teamName = document.getElementById("teamName").value

  projectDescription = document.getElementById("projectDescription").value
  productPOC = document.getElementById("productPOC").value
  designPOC = document.getElementById("designPOC").value
  engPOC = document.getElementById("engPOC").value
  

  slackChannel = document.getElementById("slackChannel").value
  hexColor = document.getElementById("coverColor").value

  function hexToRGB(h) {
    let r = 0, g = 0, b = 0;

    // 3 digits
    if (h.length == 4) {
      r = "0x" + h[1] + h[1];
      g = "0x" + h[2] + h[2];
      b = "0x" + h[3] + h[3];

    // 6 digits
    } else if (h.length == 7) {
      r = "0x" + h[1] + h[2];
      g = "0x" + h[3] + h[4];
      b = "0x" + h[5] + h[6];
    }
    

    rgbArray = [ (+r/255), (+g/255), (+b/255)]
    return rgbArray
  }

  rgbColorValues = hexToRGB(hexColor)


  parent.postMessage({ pluginMessage: { 
    type: 'createTemplate', 
    projectName: projectName, 
    projectDescription: projectDescription,
    productPOC: productPOC,
    designPOC: designPOC,
    engPOC: engPOC,
    teamName: teamName, 
    slackChannel: slackChannel, 
    color: rgbColorValues
  }}, '*')
}

</script>


